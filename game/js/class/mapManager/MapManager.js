export class MapManager {
    constructor(canvas, ctx) {
        this.canvas = canvas;
        this.ctx = ctx;
        this.map = {"width":500,"height":500,"blockSize":50,"coords":[{"id":0,"x":0,"y":0,"blockColliders":[{"type":"yWall","x":3,"y":0,"w":47,"h":3},{"type":"yWall","x":3,"y":47,"w":47,"h":3},{"type":"xWall","x":0,"y":0,"w":3,"h":50},{"type":"xWall","x":47,"y":0,"w":3,"h":50}],"block":true},{"id":1,"x":0,"y":50,"blockColliders":[{"type":"yWall","x":3,"y":50,"w":47,"h":3},{"type":"yWall","x":3,"y":97,"w":47,"h":3},{"type":"xWall","x":0,"y":50,"w":3,"h":50},{"type":"xWall","x":47,"y":50,"w":3,"h":50}],"block":true},{"id":2,"x":0,"y":100,"blockColliders":[{"type":"yWall","x":3,"y":100,"w":47,"h":3},{"type":"yWall","x":3,"y":147,"w":47,"h":3},{"type":"xWall","x":0,"y":100,"w":3,"h":50},{"type":"xWall","x":47,"y":100,"w":3,"h":50}],"block":true},{"id":3,"x":0,"y":150,"blockColliders":[{"type":"yWall","x":3,"y":150,"w":47,"h":3},{"type":"yWall","x":3,"y":197,"w":47,"h":3},{"type":"xWall","x":0,"y":150,"w":3,"h":50},{"type":"xWall","x":47,"y":150,"w":3,"h":50}],"block":true},{"id":4,"x":0,"y":200,"blockColliders":[{"type":"yWall","x":3,"y":200,"w":47,"h":3},{"type":"yWall","x":3,"y":247,"w":47,"h":3},{"type":"xWall","x":0,"y":200,"w":3,"h":50},{"type":"xWall","x":47,"y":200,"w":3,"h":50}],"block":true},{"id":5,"x":0,"y":250,"blockColliders":[{"type":"yWall","x":3,"y":250,"w":47,"h":3},{"type":"yWall","x":3,"y":297,"w":47,"h":3},{"type":"xWall","x":0,"y":250,"w":3,"h":50},{"type":"xWall","x":47,"y":250,"w":3,"h":50}],"block":true},{"id":6,"x":0,"y":300,"blockColliders":[{"type":"yWall","x":3,"y":300,"w":47,"h":3},{"type":"yWall","x":3,"y":347,"w":47,"h":3},{"type":"xWall","x":0,"y":300,"w":3,"h":50},{"type":"xWall","x":47,"y":300,"w":3,"h":50}],"block":true},{"id":7,"x":0,"y":350,"blockColliders":[{"type":"yWall","x":3,"y":350,"w":47,"h":3},{"type":"yWall","x":3,"y":397,"w":47,"h":3},{"type":"xWall","x":0,"y":350,"w":3,"h":50},{"type":"xWall","x":47,"y":350,"w":3,"h":50}],"block":true},{"id":8,"x":0,"y":400,"blockColliders":[{"type":"yWall","x":3,"y":400,"w":47,"h":3},{"type":"yWall","x":3,"y":447,"w":47,"h":3},{"type":"xWall","x":0,"y":400,"w":3,"h":50},{"type":"xWall","x":47,"y":400,"w":3,"h":50}],"block":true},{"id":9,"x":0,"y":450,"blockColliders":[{"type":"yWall","x":3,"y":450,"w":47,"h":3},{"type":"yWall","x":3,"y":497,"w":47,"h":3},{"type":"xWall","x":0,"y":450,"w":3,"h":50},{"type":"xWall","x":47,"y":450,"w":3,"h":50}],"block":true},{"id":10,"x":50,"y":0,"blockColliders":[{"type":"yWall","x":53,"y":0,"w":47,"h":3},{"type":"yWall","x":53,"y":47,"w":47,"h":3},{"type":"xWall","x":50,"y":0,"w":3,"h":50},{"type":"xWall","x":97,"y":0,"w":3,"h":50}],"block":true},{"id":19,"x":50,"y":450,"blockColliders":[{"type":"yWall","x":53,"y":450,"w":47,"h":3},{"type":"yWall","x":53,"y":497,"w":47,"h":3},{"type":"xWall","x":50,"y":450,"w":3,"h":50},{"type":"xWall","x":97,"y":450,"w":3,"h":50}],"block":true},{"id":20,"x":100,"y":0,"blockColliders":[{"type":"yWall","x":103,"y":0,"w":47,"h":3},{"type":"yWall","x":103,"y":47,"w":47,"h":3},{"type":"xWall","x":100,"y":0,"w":3,"h":50},{"type":"xWall","x":147,"y":0,"w":3,"h":50}],"block":true},{"id":29,"x":100,"y":450,"blockColliders":[{"type":"yWall","x":103,"y":450,"w":47,"h":3},{"type":"yWall","x":103,"y":497,"w":47,"h":3},{"type":"xWall","x":100,"y":450,"w":3,"h":50},{"type":"xWall","x":147,"y":450,"w":3,"h":50}],"block":true},{"id":30,"x":150,"y":0,"blockColliders":[{"type":"yWall","x":153,"y":0,"w":47,"h":3},{"type":"yWall","x":153,"y":47,"w":47,"h":3},{"type":"xWall","x":150,"y":0,"w":3,"h":50},{"type":"xWall","x":197,"y":0,"w":3,"h":50}],"block":true},{"id":39,"x":150,"y":450,"blockColliders":[{"type":"yWall","x":153,"y":450,"w":47,"h":3},{"type":"yWall","x":153,"y":497,"w":47,"h":3},{"type":"xWall","x":150,"y":450,"w":3,"h":50},{"type":"xWall","x":197,"y":450,"w":3,"h":50}],"block":true},{"id":40,"x":200,"y":0,"blockColliders":[{"type":"yWall","x":203,"y":0,"w":47,"h":3},{"type":"yWall","x":203,"y":47,"w":47,"h":3},{"type":"xWall","x":200,"y":0,"w":3,"h":50},{"type":"xWall","x":247,"y":0,"w":3,"h":50}],"block":true},{"id":45,"x":200,"y":250,"blockColliders":[{"type":"yWall","x":203,"y":250,"w":47,"h":3},{"type":"yWall","x":203,"y":297,"w":47,"h":3},{"type":"xWall","x":200,"y":250,"w":3,"h":50},{"type":"xWall","x":247,"y":250,"w":3,"h":50}],"block":true},{"id":49,"x":200,"y":450,"blockColliders":[{"type":"yWall","x":203,"y":450,"w":47,"h":3},{"type":"yWall","x":203,"y":497,"w":47,"h":3},{"type":"xWall","x":200,"y":450,"w":3,"h":50},{"type":"xWall","x":247,"y":450,"w":3,"h":50}],"block":true},{"id":50,"x":250,"y":0,"blockColliders":[{"type":"yWall","x":253,"y":0,"w":47,"h":3},{"type":"yWall","x":253,"y":47,"w":47,"h":3},{"type":"xWall","x":250,"y":0,"w":3,"h":50},{"type":"xWall","x":297,"y":0,"w":3,"h":50}],"block":true},{"id":59,"x":250,"y":450,"blockColliders":[{"type":"yWall","x":253,"y":450,"w":47,"h":3},{"type":"yWall","x":253,"y":497,"w":47,"h":3},{"type":"xWall","x":250,"y":450,"w":3,"h":50},{"type":"xWall","x":297,"y":450,"w":3,"h":50}],"block":true},{"id":60,"x":300,"y":0,"blockColliders":[{"type":"yWall","x":303,"y":0,"w":47,"h":3},{"type":"yWall","x":303,"y":47,"w":47,"h":3},{"type":"xWall","x":300,"y":0,"w":3,"h":50},{"type":"xWall","x":347,"y":0,"w":3,"h":50}],"block":true},{"id":69,"x":300,"y":450,"blockColliders":[{"type":"yWall","x":303,"y":450,"w":47,"h":3},{"type":"yWall","x":303,"y":497,"w":47,"h":3},{"type":"xWall","x":300,"y":450,"w":3,"h":50},{"type":"xWall","x":347,"y":450,"w":3,"h":50}],"block":true},{"id":70,"x":350,"y":0,"blockColliders":[{"type":"yWall","x":353,"y":0,"w":47,"h":3},{"type":"yWall","x":353,"y":47,"w":47,"h":3},{"type":"xWall","x":350,"y":0,"w":3,"h":50},{"type":"xWall","x":397,"y":0,"w":3,"h":50}],"block":true},{"id":79,"x":350,"y":450,"blockColliders":[{"type":"yWall","x":353,"y":450,"w":47,"h":3},{"type":"yWall","x":353,"y":497,"w":47,"h":3},{"type":"xWall","x":350,"y":450,"w":3,"h":50},{"type":"xWall","x":397,"y":450,"w":3,"h":50}],"block":true},{"id":80,"x":400,"y":0,"blockColliders":[{"type":"yWall","x":403,"y":0,"w":47,"h":3},{"type":"yWall","x":403,"y":47,"w":47,"h":3},{"type":"xWall","x":400,"y":0,"w":3,"h":50},{"type":"xWall","x":447,"y":0,"w":3,"h":50}],"block":true},{"id":89,"x":400,"y":450,"blockColliders":[{"type":"yWall","x":403,"y":450,"w":47,"h":3},{"type":"yWall","x":403,"y":497,"w":47,"h":3},{"type":"xWall","x":400,"y":450,"w":3,"h":50},{"type":"xWall","x":447,"y":450,"w":3,"h":50}],"block":true},{"id":90,"x":450,"y":0,"blockColliders":[{"type":"yWall","x":453,"y":0,"w":47,"h":3},{"type":"yWall","x":453,"y":47,"w":47,"h":3},{"type":"xWall","x":450,"y":0,"w":3,"h":50},{"type":"xWall","x":497,"y":0,"w":3,"h":50}],"block":true},{"id":91,"x":450,"y":50,"blockColliders":[{"type":"yWall","x":453,"y":50,"w":47,"h":3},{"type":"yWall","x":453,"y":97,"w":47,"h":3},{"type":"xWall","x":450,"y":50,"w":3,"h":50},{"type":"xWall","x":497,"y":50,"w":3,"h":50}],"block":true},{"id":92,"x":450,"y":100,"blockColliders":[{"type":"yWall","x":453,"y":100,"w":47,"h":3},{"type":"yWall","x":453,"y":147,"w":47,"h":3},{"type":"xWall","x":450,"y":100,"w":3,"h":50},{"type":"xWall","x":497,"y":100,"w":3,"h":50}],"block":true},{"id":93,"x":450,"y":150,"blockColliders":[{"type":"yWall","x":453,"y":150,"w":47,"h":3},{"type":"yWall","x":453,"y":197,"w":47,"h":3},{"type":"xWall","x":450,"y":150,"w":3,"h":50},{"type":"xWall","x":497,"y":150,"w":3,"h":50}],"block":true},{"id":94,"x":450,"y":200,"blockColliders":[{"type":"yWall","x":453,"y":200,"w":47,"h":3},{"type":"yWall","x":453,"y":247,"w":47,"h":3},{"type":"xWall","x":450,"y":200,"w":3,"h":50},{"type":"xWall","x":497,"y":200,"w":3,"h":50}],"block":true},{"id":95,"x":450,"y":250,"blockColliders":[{"type":"yWall","x":453,"y":250,"w":47,"h":3},{"type":"yWall","x":453,"y":297,"w":47,"h":3},{"type":"xWall","x":450,"y":250,"w":3,"h":50},{"type":"xWall","x":497,"y":250,"w":3,"h":50}],"block":true},{"id":96,"x":450,"y":300,"blockColliders":[{"type":"yWall","x":453,"y":300,"w":47,"h":3},{"type":"yWall","x":453,"y":347,"w":47,"h":3},{"type":"xWall","x":450,"y":300,"w":3,"h":50},{"type":"xWall","x":497,"y":300,"w":3,"h":50}],"block":true},{"id":97,"x":450,"y":350,"blockColliders":[{"type":"yWall","x":453,"y":350,"w":47,"h":3},{"type":"yWall","x":453,"y":397,"w":47,"h":3},{"type":"xWall","x":450,"y":350,"w":3,"h":50},{"type":"xWall","x":497,"y":350,"w":3,"h":50}],"block":true},{"id":98,"x":450,"y":400,"blockColliders":[{"type":"yWall","x":453,"y":400,"w":47,"h":3},{"type":"yWall","x":453,"y":447,"w":47,"h":3},{"type":"xWall","x":450,"y":400,"w":3,"h":50},{"type":"xWall","x":497,"y":400,"w":3,"h":50}],"block":true},{"id":99,"x":450,"y":450,"blockColliders":[{"type":"yWall","x":453,"y":450,"w":47,"h":3},{"type":"yWall","x":453,"y":497,"w":47,"h":3},{"type":"xWall","x":450,"y":450,"w":3,"h":50},{"type":"xWall","x":497,"y":450,"w":3,"h":50}],"block":true}]};
        this.blockColor = "black";
    }

    renderMap(map) {
        let width = map.width;
        let height = map.height;
        let blockSize = map.blockSize;
        let blockCoords = map.coords;

        this.canvas.width = width;
        this.canvas.height = height;

        blockCoords.forEach(v => {
            this.ctx.beginPath();
            this.ctx.rect(v.x, v.y, blockSize, blockSize);
            this.ctx.fillStyle = this.blockColor;    
            this.ctx.closePath();
            this.ctx.fill();

            this.debugColliders(v.blockColliders);
        });      
    }

    debugColliders(colliders) {

        colliders.forEach((v)=>{
            let fillStyle
            if (v.type === "yWall") {
                fillStyle = "red";
            } else {
                fillStyle = "green";
            }
            this.ctx.beginPath();
            this.ctx.rect(v.x, v.y, v.w, v.h);
            this.ctx.fillStyle = fillStyle;    
            this.ctx.closePath();
            this.ctx.fill();
        })
        
    }

    getMap() {
        return this.map;
    }
}